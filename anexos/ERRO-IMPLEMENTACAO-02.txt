Commit: fix: configure static assets copy for standalone build in nixpacks and dockerfile 
##########################################
### Download Github Archive Started...
### Sun, 07 Dec 2025 19:21:13 GMT
##########################################


╔═══════════════════════ Nixpacks v1.34.1 ══════════════════════╗
║ setup      │ nodejs_20, npm-9_x                               ║
║───────────────────────────────────────────────────────────────║
║ install    │ npm i                                            ║
║───────────────────────────────────────────────────────────────║
║ build      │ npm run build                                    ║
║            │ mkdir -p .next/standalone/.next                  ║
║            │ cp -r public .next/standalone/public             ║
║            │ cp -r .next/static .next/standalone/.next/static ║
║───────────────────────────────────────────────────────────────║
║ start      │ node .next/standalone/server.js                  ║
╚═══════════════════════════════════════════════════════════════╝


Saved output to:
  /etc/easypanel/projects/sites/xcloud/code/
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.92kB done
#1 DONE 0.0s

#2 [internal] load metadata for ghcr.io/railwayapp/nixpacks:ubuntu-1741046653
#2 DONE 0.3s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [stage-0  1/13] FROM ghcr.io/railwayapp/nixpacks:ubuntu-1741046653@sha256:ed406b77fb751927991b8655e76c33a4521c4957c2afeab293be7c63c2a373d2
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 5.27MB 0.0s done
#5 DONE 0.0s

#6 [stage-0  2/13] WORKDIR /app/
#6 CACHED

#7 [stage-0  3/13] COPY .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix
#7 CACHED

#8 [stage-0  4/13] RUN nix-env -if .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix && nix-collect-garbage -d
#8 CACHED

#9 [stage-0  5/13] COPY . /app/.
#9 DONE 0.0s

#10 [stage-0  6/13] RUN --mount=type=cache,id=OlwKWf4EZgI-/root/npm,target=/root/.npm npm i
#10 8.824 
#10 8.824 added 174 packages, and audited 175 packages in 9s
#10 8.824 
#10 8.824 42 packages are looking for funding
#10 8.824   run `npm fund` for details
#10 8.824 
#10 8.824 found 0 vulnerabilities
#10 DONE 9.0s

#11 [stage-0  7/13] COPY . /app/.
#11 DONE 0.0s

#12 [stage-0  8/13] RUN --mount=type=cache,id=OlwKWf4EZgI-next/cache,target=/app/.next/cache --mount=type=cache,id=OlwKWf4EZgI-node_modules/cache,target=/app/node_modules/.cache npm run build
#12 0.289 
#12 0.289 > xcloudtv-site@0.1.0 build
#12 0.289 > next build
#12 0.289 
#12 0.693 Attention: Next.js now collects completely anonymous telemetry regarding usage.
#12 0.693 This information is used to shape Next.js' roadmap and prioritize features.
#12 0.693 You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
#12 0.693 https://nextjs.org/telemetry
#12 0.693 
#12 0.704    ▲ Next.js 16.0.7 (Turbopack)
#12 0.704 
#12 0.766    Creating an optimized production build ...
#12 4.684  ✓ Compiled successfully in 3.7s
#12 4.692    Running TypeScript ...
#12 4.811 It looks like you're trying to use TypeScript but do not have the required package(s) installed.
#12 4.811 Installing dependencies
#12 4.811 
#12 4.811 If you are not trying to use TypeScript, please remove the tsconfig.json file from your package root (and any TypeScript files in your app and pages directories).
#12 4.811 
#12 4.816 
#12 4.817 Installing devDependencies (npm):
#12 4.817 - typescript
#12 4.817 - @types/node
#12 4.817 
#12 9.548 
#12 9.548 added 295 packages, and audited 470 packages in 5s
#12 9.548 
#12 9.548 162 packages are looking for funding
#12 9.548   run `npm fund` for details
#12 9.549 
#12 9.549 found 0 vulnerabilities
#12 9.567 
#12 13.33    Collecting page data using 3 workers ...
#12 13.67    Generating static pages using 3 workers (0/16) ...
#12 14.10    Generating static pages using 3 workers (4/16) 
#12 14.12    Generating static pages using 3 workers (8/16) 
#12 14.26    Generating static pages using 3 workers (12/16) 
#12 14.26  ✓ Generating static pages using 3 workers (16/16) in 593.4ms
#12 14.28    Finalizing page optimization ...
#12 14.43 
#12 14.43 Route (app)
#12 14.43 ┌ ○ /
#12 14.43 ├ ○ /_not-found
#12 14.43 ├ ƒ /api/health
#12 14.43 ├ ƒ /api/teste-xcloud
#12 14.43 ├ ○ /contato
#12 14.43 ├ ○ /download
#12 14.43 ├ ○ /planos
#12 14.43 ├ ○ /planos-xcloud-iptv
#12 14.43 ├ ○ /politica-de-privacidade
#12 14.43 ├ ○ /politica-de-reembolso
#12 14.43 ├ ○ /sitemap.xml
#12 14.43 ├ ○ /sobre-nos
#12 14.43 ├ ○ /termos-de-uso
#12 14.43 ├ ○ /teste-gratis
#12 14.43 └ ○ /teste-gratis-xcloud-iptv
#12 14.43 
#12 14.43 
#12 14.43 ○  (Static)   prerendered as static content
#12 14.43 ƒ  (Dynamic)  server-rendered on demand
#12 14.43 
#12 14.48 npm notice
#12 14.48 npm notice New major version of npm available! 10.8.2 -> 11.6.4
#12 14.48 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.4
#12 14.48 npm notice To update run: npm install -g npm@11.6.4
#12 14.48 npm notice
#12 DONE 14.6s

#13 [stage-0  9/13] RUN --mount=type=cache,id=OlwKWf4EZgI-next/cache,target=/app/.next/cache --mount=type=cache,id=OlwKWf4EZgI-node_modules/cache,target=/app/node_modules/.cache mkdir -p .next/standalone/.next
#13 DONE 0.0s

#14 [stage-0 10/13] RUN --mount=type=cache,id=OlwKWf4EZgI-next/cache,target=/app/.next/cache --mount=type=cache,id=OlwKWf4EZgI-node_modules/cache,target=/app/node_modules/.cache cp -r public .next/standalone/public
#14 0.039 cp: cannot stat 'public': No such file or directory
#14 ERROR: process "/bin/bash -ol pipefail -c cp -r public .next/standalone/public" did not complete successfully: exit code: 1
------
 > [stage-0 10/13] RUN --mount=type=cache,id=OlwKWf4EZgI-next/cache,target=/app/.next/cache --mount=type=cache,id=OlwKWf4EZgI-node_modules/cache,target=/app/node_modules/.cache cp -r public .next/standalone/public:
0.039 cp: cannot stat 'public': No such file or directory
------

 5 warnings found (use docker --debug to expand):
 - UndefinedVar: Usage of undefined variable '$NIXPACKS_PATH' (line 18)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "API_SECRET") (line 11)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "JWT_SECRET") (line 11)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "API_SECRET") (line 12)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "JWT_SECRET") (line 12)
Dockerfile:26
--------------------
  24 |     RUN --mount=type=cache,id=OlwKWf4EZgI-next/cache,target=/app/.next/cache --mount=type=cache,id=OlwKWf4EZgI-node_modules/cache,target=/app/node_modules/.cache npm run build
  25 |     RUN --mount=type=cache,id=OlwKWf4EZgI-next/cache,target=/app/.next/cache --mount=type=cache,id=OlwKWf4EZgI-node_modules/cache,target=/app/node_modules/.cache mkdir -p .next/standalone/.next
  26 | >>> RUN --mount=type=cache,id=OlwKWf4EZgI-next/cache,target=/app/.next/cache --mount=type=cache,id=OlwKWf4EZgI-node_modules/cache,target=/app/node_modules/.cache cp -r public .next/standalone/public
  27 |     RUN --mount=type=cache,id=OlwKWf4EZgI-next/cache,target=/app/.next/cache --mount=type=cache,id=OlwKWf4EZgI-node_modules/cache,target=/app/node_modules/.cache cp -r .next/static .next/standalone/.next/static
  28 |     
--------------------
ERROR: failed to build: failed to solve: process "/bin/bash -ol pipefail -c cp -r public .next/standalone/public" did not complete successfully: exit code: 1
##########################################
### Error
### Sun, 07 Dec 2025 19:21:37 GMT
##########################################

Command failed with exit code 1: docker buildx build --network host -f /etc/easypanel/projects/sites/xcloud/code/.nixpacks/Dockerfile -t easypanel/sites/xcloud --label 'keep=true' --build-arg 'NODE_ENV=production' --build-arg 'PORT=3000' --build-arg 'NEXT_PUBLIC_SITE_URL=https://xcloudiptv.com.br' --build-arg 'JWT_SECRET=vL0JYeTfwFpVe914LirP6yU97WGxEcXg' --build-arg 'API_SECRET=fblnyqqqVuVD8Ldpc6pBa6DLj0AMop48' --build-arg 'NEXT_PUBLIC_GA_MEASUREMENT_ID=G-ZC4JVQZT13' --build-arg 'GIT_SHA=44f17a8ab5c1d9220525c7a97046c5876538486f' /etc/easypanel/projects/sites/xcloud/code/