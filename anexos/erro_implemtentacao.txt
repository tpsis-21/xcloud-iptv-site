Commit: Fix: Corrige ordem de execuÃ§Ã£o do EasyPanel - adiciona script de inicializaÃ§Ã£o segura 
##########################################
### Download Github Archive Started...
### Sat, 22 Nov 2025 20:39:00 GMT
##########################################


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Nixpacks v1.34.1 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ setup      â”‚ nodejs_18, npm-9_x                        â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘ start      â”‚ chmod +x start-safe.sh && ./start-safe.sh â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘ install    â”‚ npm ci                                    â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘ build      â”‚ npm run build                             â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘ start      â”‚ npm run start                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


Saved output to:
  /etc/easypanel/projects/sites/xcloud/code/
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.39kB done
#1 DONE 0.0s

#2 [internal] load metadata for ghcr.io/railwayapp/nixpacks:ubuntu-1741046653
#2 DONE 0.4s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [stage-0  1/12] FROM ghcr.io/railwayapp/nixpacks:ubuntu-1741046653@sha256:ed406b77fb751927991b8655e76c33a4521c4957c2afeab293be7c63c2a373d2
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 1.94MB 0.0s done
#5 DONE 0.0s

#6 [stage-0  2/12] WORKDIR /app/
#6 CACHED

#7 [stage-0  3/12] COPY .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix
#7 CACHED

#8 [stage-0  4/12] RUN nix-env -if .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix && nix-collect-garbage -d
#8 CACHED

#9 [stage-0  5/12] COPY . /app/.
#9 DONE 0.0s

#10 [stage-0  6/12] RUN  chmod +x start-safe.sh && ./start-safe.sh
#10 0.067 ðŸ” Verificando dependÃªncias...
#10 0.067 âŒ Next.js nÃ£o encontrado. Instalando dependÃªncias...
#10 0.492 npm error code EUSAGE
#10 0.493 npm error
#10 0.493 npm error The `npm ci` command can only install with an existing package-lock.json or
#10 0.493 npm error npm-shrinkwrap.json with lockfileVersion >= 1. Run an install with npm@5 or
#10 0.493 npm error later to generate a package-lock.json file, then try again.
#10 0.493 npm error
#10 0.493 npm error Clean install a project
#10 0.493 npm error
#10 0.493 npm error Usage:
#10 0.493 npm error npm ci
#10 0.493 npm error
#10 0.493 npm error Options:
#10 0.493 npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
#10 0.493 npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
#10 0.493 npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
#10 0.493 npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
#10 0.493 npm error [--no-bin-links] [--no-fund] [--dry-run]
#10 0.493 npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
#10 0.493 npm error [-ws|--workspaces] [--include-workspace-root] [--install-links]
#10 0.493 npm error
#10 0.493 npm error aliases: clean-install, ic, install-clean, isntall-clean
#10 0.493 npm error
#10 0.493 npm error Run "npm help ci" for more info
#10 0.494 npm error A complete log of this run can be found in: /root/.npm/_logs/2025-11-22T20_39_01_716Z-debug-0.log
#10 0.501 âŒ Falha ao instalar dependÃªncias do Next.js
#10 ERROR: process "/bin/bash -ol pipefail -c chmod +x start-safe.sh && ./start-safe.sh" did not complete successfully: exit code: 1
------
 > [stage-0  6/12] RUN  chmod +x start-safe.sh && ./start-safe.sh:
0.493 npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
0.493 npm error [--no-bin-links] [--no-fund] [--dry-run]
0.493 npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
0.493 npm error [-ws|--workspaces] [--include-workspace-root] [--install-links]
0.493 npm error
0.493 npm error aliases: clean-install, ic, install-clean, isntall-clean
0.493 npm error
0.493 npm error Run "npm help ci" for more info
0.494 npm error A complete log of this run can be found in: /root/.npm/_logs/2025-11-22T20_39_01_716Z-debug-0.log
0.501 âŒ Falha ao instalar dependÃªncias do Next.js
------

 5 warnings found (use docker --debug to expand):
 - UndefinedVar: Usage of undefined variable '$NIXPACKS_PATH' (line 22)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "API_SECRET") (line 11)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "JWT_SECRET") (line 11)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "API_SECRET") (line 12)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "JWT_SECRET") (line 12)
Dockerfile:19
--------------------
  17 |     # start phase
  18 |     COPY . /app/.
  19 | >>> RUN  chmod +x start-safe.sh && ./start-safe.sh
  20 |     
  21 |     # install phase
--------------------
ERROR: failed to build: failed to solve: process "/bin/bash -ol pipefail -c chmod +x start-safe.sh && ./start-safe.sh" did not complete successfully: exit code: 1
##########################################
### Error
### Sat, 22 Nov 2025 20:39:02 GMT
##########################################

Command failed with exit code 1: docker buildx build --network host -f /etc/easypanel/projects/sites/xcloud/code/.nixpacks/Dockerfile -t easypanel/sites/xcloud --label 'keep=true' --build-arg 'NODE_ENV=production' --build-arg 'PORT=3000' --build-arg 'NEXT_PUBLIC_SITE_URL=https://xcloudiptv.com.br' --build-arg 'JWT_SECRET=vL0JYeTfwFpVe914LirP6yU97WGxEcXg' --build-arg 'API_SECRET=fblnyqqqVuVD8Ldpc6pBa6DLj0AMop48' --build-arg 'NEXT_PUBLIC_GA_MEASUREMENT_ID=G-ZC4JVQZT13' --build-arg 'GIT_SHA=76fa7eef90c6eb531d9620e0a0f0ef2a31802204' /etc/easypanel/projects/sites/xcloud/code/